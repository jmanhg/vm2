<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" > 

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="../../support/templates/ComplexTemplate.xhtml">

    <ui:define name="pageName">Usuarios</ui:define>
    <ui:define name="content">

        <f:view encoding="UTF-8" contentType="text/html">
            <h:head>
                <title>#{translatedMessage['title.message']}</title>
            </h:head>
            <h:body>
                <h:form id="forma">
                    <p:panel style="width: 90%">
                        <p:dataTable id="usuarioTable"
                            var="usuarioSelected" 
                            value="#{usuarioMB.usuarios}" 
                            resizableColumns="true"
                            editable="true" 
                            paginator="true" rows="5"
                            paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                            rowsPerPageTemplate="5,10,15,25"
                            style="font-size: 10px"
                            liveResize="true"
                            >

                            <f:facet name="header">  
                                Lista de Usuarios
                            </f:facet>
                            <p:column style="width:4%">  
                                <p:commandButton id="selectButton" update=":forma:dlgUsuario" oncomplete="dlgUsuario.show()" icon="ui-icon-search" title="Editar">  
                                    <f:setPropertyActionListener value="#{usuarioSelected}" target="#{usuarioMB.usuarioSelected}" />  
                                </p:commandButton>  
                            </p:column> 
                            <p:column style="width:4%">  
                                <p:commandButton id="deleteButton" update=":forma:dlgBorrar" oncomplete="dlgBorrar.show()"  icon="ui-icon-delete" title="Borrar">  
                                    <f:setPropertyActionListener value="#{usuarioSelected}" target="#{usuarioMB.usuarioSelected}"  />  
                                </p:commandButton>  
                            </p:column> 
                            
                            <p:column>
                                <f:facet name="header">ID</f:facet>
                                <h:outputText value="#{usuarioSelected.idUsuario}" />
                            </p:column>
                            <p:column filterBy="#{usuarioSelected.nombre}"  >
                                <f:facet name="header">Nombre</f:facet>
                                <h:outputText value="#{usuarioSelected.nombre}" />
                            </p:column>
                            <p:column  >
                                <f:facet name="header">A Paterno</f:facet>
                                <h:outputText value="#{usuarioSelected.apaterno}" />
                            </p:column>
                            <p:column>
                                <f:facet name="header">Activo</f:facet>
                                <p:selectBooleanCheckbox value="#{usuarioSelected.activo}" disabled="true" />
                            </p:column>
                            <f:facet name="footer">  
                            </f:facet>
                        </p:dataTable>    

                    </p:panel>
                    
                     <p:dialog id="dlgBorrar" header="usuario Edit" width="400" height="400" widgetVar="dlgBorrar"  >

                        <p:panel style="width: 90%">
                            <h:panelGrid columns="2">
                                
                               <h:outputText value="id" />      
                               <h:inputText value="#{usuarioMB.usuarioSelected.idUsuario}" /> 
                                <h:outputText value="NombreX" />
                                <h:inputText value="#{usuarioMB.usuarioSelected.nombre}" size="30" />
                                 </h:panelGrid>                    
                        </p:panel>
                        <p:commandButton value="Borrar" actionListener="#{usuarioMB.borra}" oncomplete="dlgBorrar.hide()" update=":forma:usuarioTable" />
                        <p:commandButton value="Cancelar"  oncomplete="dlgBorrar.hide()" />

                    </p:dialog> 
                    <p:dialog id="dlgUsuario" header="usuario Edit" width="400" height="400" widgetVar="dlgUsuario"  >

                        <p:panel style="width: 90%">
                            <h:panelGrid columns="2">
                                <h:outputText value="id" />      
                                <h:inputText value="#{usuarioMB.usuarioSelected.idUsuario}" /> 
                                <h:outputText value="NombreX" />
                                <h:inputText value="#{usuarioMB.usuarioSelected.nombre}" size="30" />
                                <h:outputText value="Apaterno" />
                                <h:inputText value="#{usuarioMB.usuarioSelected.apaterno}" />
                                <h:outputText value="Activo" />
                                <p:selectBooleanCheckbox value="#{usuarioMB.usuarioSelected.activo}" />

                            </h:panelGrid>                    
                        </p:panel>
                        <p:commandButton value="Guardar" actionListener="#{usuarioMB.modifica}" oncomplete="dlgUsuario.hide()" update=":forma:usuarioTable" />
                        <p:commandButton value="Cancelar"  oncomplete="dlgUsuario.hide()" />

                    </p:dialog>    


                </h:form>
            </h:body>

        </f:view>
    </ui:define>
</ui:composition>