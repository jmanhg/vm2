<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN"
        "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>

    <bean id="dataSource"
        class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
        <property name="driverClass" value="${jdbc.driverClassName}"/>
        <property name="jdbcUrl" value="${jdbc.url}"/>
        <property name="user" value="${jdbc.username}"/>
        <property name="password" value="${jdbc.password}"/>

        <property name="minPoolSize" value="10"/>
        <property name="maxPoolSize" value="100"/>
        <property name="maxStatements" value="50"/>
        <property name="acquireIncrement" value="5"/>

        <property name="idleConnectionTestPeriod" value="7200"/><!--  3600 segundos = una hora -->
        <property name="checkoutTimeout" value="120000"/><!--  60000 milisegundos = 60 segundos = 1 minuto -->

        <property name="maxIdleTime" value="7200"/><!--  1 hora -->
        <property name="maxConnectionAge" value="7200"/><!--  2 horas -->
    </bean>

    <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource" />
    </bean>

    <!-- Integraciï¿½n de Spring con MyBatis -->
    
    <bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="configLocation"  value="classpath:mybatis-configuration.xml" />
        <property name="mapperLocations" value="classpath:myBatis/**/*.xml" /><!--  aqui se pueden usar comodines como *.xml -->
    </bean>

    <bean id="b001" class="org.mybatis.spring.mapper.MapperScannerConfigurer">
        <property name="basePackage" value="mx.com.oposicion.persistence" />
    </bean>

</beans>