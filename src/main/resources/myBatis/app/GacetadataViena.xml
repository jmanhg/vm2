<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="mx.com.oposicion.persistence.GacetadataVienaMapper">


	<sql id="camposGacetadataViena">
            solicitud,
            idkey,
            categoria,
            division,
            seccion,
            secuencia
            
        </sql>


    <resultMap id="gacetadataVienaMap" type="GacetadataVienaType" >
        <result property="solicitud" column="solicitud"/>
        <result property="idkey" column="idkey"/>
        <result property="categoria" column="categoria"/>
        <result property="division" column="division"/>
        <result property="seccion" column="seccion"/>
        <result property="secuencia" column="secuencia"/>
        
    </resultMap>

    <select id="selectMaxSecuencia" resultType="java.lang.Integer" parameterType="java.lang.Integer">      
      SELECT ifnull(max(secuencia),0) FROM gacetadata_viena where solicitud=#{solicitud}
  </select>

    <select id="findById" resultMap="gacetadataVienaMap" parameterType="java.lang.Integer">
		SELECT 
			<include refid="camposGacetadataViena"/>
		FROM 
			gacetadata_viena
		WHERE 
                        idkey=#{idkey}
    </select>
    
    <select id="findCodVienaBySolicitud" resultType="java.lang.String" parameterType="java.lang.String">
		SELECT 
                    GROUP_CONCAT(concat(categoria,'.',division,'.',seccion) SEPARATOR ', ')
                FROM 
                    gacetadata_viena
                where 
                    solicitud=#{solicitud}
                GROUP BY solicitud
                order by secuencia
    </select>
    
    
    
    <select id="findBySolicitud" resultMap="gacetadataVienaMap" parameterType="java.lang.Integer">
		SELECT 
			<include refid="camposGacetadataViena"/>
		FROM 
			gacetadata_viena
		WHERE 
                        solicitud=#{solicitud}
                order by secuencia
    </select>
    
    <select id="findByGac" resultMap="gacetadataVienaMap" parameterType="mx.com.oposicion.model.GacetadataViena">
		SELECT 
			<include refid="camposGacetadataViena"/>
		FROM 
			gacetadata_viena
		WHERE 
                        solicitud=#{solicitud}
                        and idkey=#{idkey}
			and categoria=#{categoria}
                        and division=#{division}
                        and seccion=#{seccion}
                        and secuencia=#{secuencia}
    </select>
    
    

    <select id="getAll" resultMap="gacetadataVienaMap">
        SELECT 
            <include refid="camposGacetadataViena"/>
        FROM 
            gacetadata_viena 
        
    </select>

<insert id="insert" parameterType="GacetadataVienaType">
		INSERT INTO gacetadata_viena( <include refid="camposGacetadataViena"/> )
 		VALUES(
                        #{solicitud},
                        #{idkey},
                        #{categoria},
                        #{division},
                        #{seccion},
                        #{secuencia}
		)	
		
    </insert>
    
    <update id="delete" parameterType="GacetadataVienaType">
			delete from
                            gacetadata_viena
			WHERE
                            solicitud=#{solicitud}
                            and idkey=#{idkey}
                            and categoria=#{categoria}
                            and division=#{division}
                            and seccion=#{seccion}
                            and secuencia=#{secuencia}
    </update>
    
      <select id="selectMaxSecuenciaV" resultType="java.lang.Integer" parameterType="java.lang.Integer">      
      SELECT ifnull(max(secuencia),0) FROM gacetadatav_viena where solicitud=#{solicitud}
  </select>

    <select id="findByIdV" resultMap="gacetadataVienaMap" parameterType="java.lang.Integer">
		SELECT 
			<include refid="camposGacetadataViena"/>
		FROM 
			gacetadatav_viena
		WHERE 
                        idkey=#{idkey}
    </select>
    
    <select id="findCodVienaBySolicitudV" resultType="java.lang.String" parameterType="java.lang.String">
		SELECT 
                    GROUP_CONCAT(concat(categoria,'.',division,'.',seccion) SEPARATOR ', ')
                FROM 
                    gacetadatav_viena
                where 
                    solicitud=#{solicitud}
                GROUP BY solicitud
                order by secuencia
    </select>
    
    <select id="findBySolicitudV" resultMap="gacetadataVienaMap" parameterType="java.lang.Integer">
		SELECT 
			<include refid="camposGacetadataViena"/>
		FROM 
			gacetadatav_viena
		WHERE 
                        solicitud=#{solicitud}
                order by secuencia
    </select>
    
    <select id="findByGacV" resultMap="gacetadataVienaMap" parameterType="mx.com.oposicion.model.GacetadataViena">
		SELECT 
			<include refid="camposGacetadataViena"/>
		FROM 
			gacetadatav_viena
		WHERE 
                        solicitud=#{solicitud}
                        and idkey=#{idkey}
			and categoria=#{categoria}
                        and division=#{division}
                        and seccion=#{seccion}
                        and secuencia=#{secuencia}
    </select>
    
    

    <select id="getAllV" resultMap="gacetadataVienaMap">
        SELECT 
            <include refid="camposGacetadataViena"/>
        FROM 
            gacetadatav_viena 
        
    </select>

<insert id="insertV" parameterType="GacetadataVienaType">
		INSERT INTO gacetadatav_viena( <include refid="camposGacetadataViena"/> )
 		VALUES(
                        #{solicitud},
                        #{idkey},
                        #{categoria},
                        #{division},
                        #{seccion},
                        #{secuencia}
		)	
		
    </insert>
    
    <update id="deleteV" parameterType="GacetadataVienaType">
			delete from
                            gacetadatav_viena
			WHERE
                            solicitud=#{solicitud}
                            and idkey=#{idkey}
                            and categoria=#{categoria}
                            and division=#{division}
                            and seccion=#{seccion}
                            and secuencia=#{secuencia}
    </update>
    

</mapper>
